package client;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;
import java.net.Socket;
import java.net.UnknownHostException;

import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JOptionPane;

public class UDPConnectionP2P {
	private static UDPConnectionP2P instance = null;

	public static UDPConnectionP2P getInstance(){
		if(instance == null){
			instance = new UDPConnectionP2P();
		}
		return instance;
	}
	
	public void sendMessageP2P (){
		 BufferedReader inFromUser =
			      new BufferedReader(new InputStreamReader(System.in));
			      DatagramSocket clientSocket = new DatagramSocket();
			      InetAddress IPAddress = InetAddress.getByName("localhost");
			      byte[] sendData = new byte[1024];
			      byte[] receiveData = new byte[1024];
			      String sentence = inFromUser.readLine();
			      sendData = sentence.getBytes();
			      DatagramPacket sendPacket = new DatagramPacket(sendData, sendData.length, IPAddress, 9876);
			      clientSocket.send(sendPacket);
			      DatagramPacket receivePacket = new DatagramPacket(receiveData, receiveData.length);
			      clientSocket.receive(receivePacket);
			      String modifiedSentence = new String(receivePacket.getData());
			      System.out.println("FROM SERVER:" + modifiedSentence);
			      clientSocket.close();
	}
		     
		   
}
